<h2>Minhas apreciações</h2>
<div id="reconhecimentos" reconhecimentos={{apreciacoes}}></div>
<button data-js="reconhecimentos-recebidos" id="reconhecimentos-recebidos" class="botao__perfil__apreciacoes">Reconhecimentos Recebidos</button>
<button data-js="reconhecimentos-feitos" id="reconhecimentos-feitos" class="botao__perfil__apreciacoes">Reconhecimentos Feitas</button>
{{#each this}}
<section class="feed-reconhecimentos caixa-feed">
	<div class="container">
		<div class="bloco-reconhecimento">
			<img
				class="img-reconhecedor"
				src="{{ foto this.reconhecedor__id usar_miniatura=true}}"
			/>

			<div class="reconhecimento-recebido">
                <div class="texto-reconhecimento">
                    {{#if this.pilar__nome}}
                    <strong data-id="1" data-js="ir-ao-perfil" class="apreciador">
                        {{ this.reconhecedor__nome }} em {{ this.pilar__nome }}
                    </strong>
                    {{/if}}
    
                    <div class="data-reconhecimento">{{ emDataLegivel this.data }}</div>
    
                    <p>{{this.feedback__descritivo}}</p>
                </div>
                {{#if this.agradecimentos}}
                    {{#each this.agradecimentos}}
                        <div class="agradecimento-recebido">
                            <img class="img-reconhecedor"	src="{{ foto this.colaborador_id usar_miniatura=true}}"/>
                            <div class="texto-reconhecimento">
                                <strong data-id="1" data-js="ir-ao-perfil" class="apreciador">
                                    {{ this.colaborador_nome }}
                                </strong>
                        
                                <div class="data-reconhecimento">{{ emDataLegivel this.data }}</div>
                
                                <p>{{this.mensagem}}</p>
                            </div>
                        </div>
                    {{/each}}
                {{else}}
                    <div class="botao-agradecer">
                        <button onclick="abrirModalAdicionarAgradecimento('{{this.id}}', '{{this.reconhecido__id}}')"> Agradecer </button>
                    </div>
                {{/if}}

                
            </div>
            
			<button id="modal-botao" data-js="modal-botao" onClick="obterApreciacao('{{this.pilar__nome}}', '{{this.feedback__descritivo}}', '{{this.reconhecedor__nome}}', '{{this.reconhecido__nome}}')" name="compartilhar">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16" id="compartilhar" >
					<path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z" />
				</svg>
			</button>
		</div>
	</div>
</section>

{{else}}
<div class="ui yellow message">Ainda não possuo nenhuma apreciação.</div>
{{/each}}

<div id="container">
    <div class="modal" id="modal"></div>
    <div class="corpo-modal" id="corpo-modal">
        <div class="card" id="card">
            <div class="p">
                <div class="card">
                    <div class="card--conteudo">
                        <h1 class="card--titulo"></h1>
                        <div class="card--apreciacao">
                            <p class="card--mensagem"></p>
                            <p class="card--mensagemDe"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button class="baixar" onclick="salvarComo()">
            <img src="../static/img/botao-download.svg" alt="Icone de download" />
        </button>
        <button class="fecha" onclick="esconderModal()">
            <img src="../static/img/botao-fechar.svg" alt="Icone para fechar card" />
        </button>
    </div>
    
</div>

<div id="modal__adicionar-agradecimento">
    <div class="modal__agradecimento--container">
        <div class="conteudo__modal--agradecimento">
            <h1 class="titulo__modal"> Agradecer </h1>
            <form data-js="form_adicionar_agradecimento">
                <input hidden id="id_reconhecimento_vinculado">
                <input hidden id="id_colaborador_que_agradeceu">
                <textarea id="agradecimento" class="input__agradecimento" cols="40" rows="6" tabindex="50" maxlength="200" placeholder="Digite aqui o agradecimento" required></textarea>
                <div class="botoes__modal__adicionar--agradecimento">
                    <button type="submit" class="botao__modal--agradecimento">Confirmar</button>
                </div>
            </form>
        </div>
        <button class="botao--fecharModalAgradecimento">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
            </svg>
        </button>
    </div>
</div>

<script src="/static/app/perfil/apreciacoesPrint.js"></script>

<style>
    .agradecimento-recebido{
        margin: 16px 0 16px 24px;
    }

    #modal__adicionar-agradecimento{
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 2;

        width: 100%;
        height: 100%;

        background: rgb(0, 0, 0, 0.5);
    }

    .modal__agradecimento--container{
        display: flex;
        
        justify-content: center;
        
        margin: 300px auto;
    }

    .conteudo__modal--agradecimento{
        background-color: #2c006a;
        border-radius: 20px;
        padding: 8px;

        position: relative;
        width: 25%;
    }

    .input__agradecimento{
        margin: 15px auto;
        resize: none;
        display: block;
        width: 80%;
        justify-content: center;
        align-items: center;
        border-radius: 5px;
        padding: 8px;
    }

    .botoes__modal__adicionar--agradecimento{
        display: flex;
        flex-direction: row;
        justify-content: space-around;
        margin: 0px auto;
    }

    .botao__modal--agradecimento{
        padding: 8px;
        font-family: Campton-Bold;
        background-color: #2c006a;
        color: white;
        border: 0;
        width: 70%;
    }

    .botao--fecharModalAgradecimento{
        width: 32px;
		height: 32px;

        border: none;
        background: transparent;
    }

    .botao--fecharModalAgradecimento svg{
        width: 32px;
		height: 32px;
        position: relative;
    }

    
    
    .botao__modal--agradecimento:hover{
        border: 1px solid #fff;
        border-radius: 20px;
    }


    .botao-agradecer{
        display: flex;
        justify-content: flex-end;
    }

    .botao-agradecer button{
        cursor: pointer;
        margin: 0;
        border: none;
        font-weight: 700;
        line-height: 1em;
        font-style: normal;
        text-align: center;
        text-decoration: none;
        border-radius: 0.28571429rem;
        box-shadow: 0 0 0 1px transparent inset, 0 0 0 0 rgb(34 36 38 / 15%) inset; 
        background-color: #2c006a !important;
        color: #fff !important;
        padding: 0.78571429em 1.5em;
    }
</style>