<div class="container">
	<h1 class="titulo">Configurações de Ciclo</h1>
	<input type="hidden" id="id_ciclo" value={{this.id_ciclo}}>
	<h2>Ciclo Atual</h2>

	<div id="container__ciclo__atual">
		<div class="datas__ciclos" data-inicial={{this.data_inicial}} data-final={{this.data_final}}>
			<p class="data_inicio">Data de Início: {{this.data_inicial_formatada}}</p>
			<p class="data_final">Data Final: {{this.data_final_formatada}}</p>
		</div>
		
		<div class="nome__progresso__ciclo">
			<p class="nome__ciclo">{{this.nome_do_ciclo}}</p>
			<h1 id="porcentagem"></h1>
			<svg>
				<circle class="circulo1" cx="75" cy="75" r="50"></circle>
				<circle id="circulo2" cx="75" cy="75" r="50"></circle>
			</svg>
		</div>
		
		<div class="caixa__informacoes__ciclo">
			<p class="nome__autor">Nome do Autor: {{this.nome_usuario_que_modificou}}</p>
			<p class="data__alteracao">Data da Última Alteração: {{this.data_ultima_alteracao}}</p>
			<button id="btn__editar" onclick="mostrarModal()">Editar</button>
		</div>
	</div>

	<div id="abrirModal" class="modal__ciclo">
		<div class="box__motivo">
			<h1 class="titulo__modal">Motivo da Alteração:</h1>
			<div class="descricao">
				<textarea id="input__motivo" name="post-text" cols="100" rows="20" tabindex="101"></textarea>
				<label for="nova__data" class="label__nova__data__final">Data Final:</label>
				<input type="date" id="nova__data__final" data-js="dataFinal" class="nova__data__final" />
				<div class="btns__novo__ciclo">
					<button type="submit" data-js="btn_alterar_ciclo" id="btn__confirmar">Confirmar</button>
					<button id="btn__cancelar__edicao" onclick="fecharModal()">Cancelar</button>
				</div>
			</div>
		</div>
	</div>
	<div class="adicionar__ciclo">
		<button id="btn__adicionar__ciclo" onclick="mostrarContainerNovoCiclo()">
			Adicionar Novo Ciclo
		</button>
	</div>
	<div id="container__novo__ciclo">
		<form id="form__adicionar__ciclo">
			<input type="text" id="nome_ciclo" placeholder="Nome do Ciclo" class="adicionar__nome__ciclo" required />
			<div class="input__data">
				<div class="infos__data--inicio">
					<label for="dataInicial">Data Inicial:</label>
					<input type="date" id="data_inicial" data-js="dataInicial" class="data__inicial__ciclo" />
				</div>
				<div class="infos__data--fim">
					<label for="dataFinal">Data Final:</label>
					<input type="date" id="data_final" data-js="dataFinal" class="data__final__ciclo" required />
				</div>
			</div>
			<div class="btns__novo__ciclo">
				<button type="submit" data-js="btn_adicionar_ciclo" id="btn__adicionar"> Adicionar</button>
				<button type="submit" id="btn__cancelar" onclick="fecharContainerNovoCiclo()">
					Cancelar
				</button>
			</div>
		</form>
	</div>
</div>
<div class="ciclos__passados">

	<div class="cabecalho__historico">
		<h1 onclick="exibirCiclosPeloTitulo()" class="historico__ciclo--titulo">Ciclos passados</h1>
		<img id="seta" class="seta__historico" onclick="exibirCiclos(this)" src="../static/img/seta.svg" alt="Icone de seta">
	</div>

	<div class="container__historico" id="corpo__historico" style="display: none">
	</div>
</div>

<script>
	function exibirCiclos(seta) {
		if (seta.getAttribute('id') == 'setaAtivada') {
			seta.style.animation = "girarSetaCima 0.4s forwards";
			seta.setAttribute('id', 'setaDesativada');
			$('.container__historico').hide();
		}
		else {
			seta.setAttribute('id', 'setaAtivada');
			seta.style.animation = "girarSetaBaixo 0.4s forwards";
			$('.container__historico').show();
		}
	}


	function exibeCiclosCarrosel(numeroSecao) {
		$(".secaoSelecionada").toggleClass("secaoSelecionada");

		$('#secao' + numeroSecao).toggleClass("secaoSelecionada");
	}

	function mudarCiclosPelaSetaDireita() {
		var idSecaoAtual = $('input[name=opcaoSecao]:checked', '.opcoes').attr('id');
		var idSecaoDestino = parseInt(idSecaoAtual) + 1;
		$('#' + idSecaoDestino).click();
	}

	function mudarCiclosPelaSetaEsquerda() {
		var idSecaoAtual = $('input[name=opcaoSecao]:checked', '.opcoes').attr('id');
		var idSecaoDestino = parseInt(idSecaoAtual) - 1;
		$('#' + idSecaoDestino).click();
	}

	function exibirCiclosPeloTitulo() {
		var seta = $('.seta__historico');

		seta.click();
	}
</script>

<style>
	body {
		background-color: whitesmoke;
	}

	.historico__ciclo--titulo {
		font-size: 1.2rem;
		cursor: pointer;
		margin: 0;
	}
	.nome__autor{
		color: black;
	}
	.cabecalho__historico {
		display: flex;
		width: 80%;
		margin: 0 auto;
		text-align: left;
	}

	.seta__historico {
		cursor: pointer;
	}

	.container__historico {
		position: relative;
		width: 70%;
		margin: 0 auto;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	.lista__historico {
		list-style: none;
		width: 80%;
		margin: 0 auto;
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: space-around;
		animation-delay: 5s;
		animation: aparecerLista 1s forwards;
	}

	.lista__historico--item {
		background-color: lightgray;
		margin: 0 16px;
		padding: 8px 32px;
		border-radius: 12px;
		text-align: center;
	}

	.opcoes {
		width: 40%;
		margin: 16px auto;
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: center;
	}

	.opcao__secao {
		border-radius: 50%;
		position: relative;
		width: 12px;
		height: 12px;
		margin: 0 4px;
		cursor: pointer;
	}

		.opcao__secao input:checked + span {
			background-color: purple;
		}

	.opcao__secao--span {
		background-color: gray;
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%,-50%);
		width: 100%;
		height: 100%;
		border-radius: 50%;
		transition: 0.6s;
	}

	.opcao__secao--input {
		display: none;
	}

	.secao {
		display: none;
	}

	.secaoSelecionada {
		animation: aparecerSecao 2s forwards;
		display: flex;
	}

	.botao__opcao--historicoEsquerda {
		border: 0;
		background-color: purple;
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: center;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		position: absolute;
		top: 30%;
		left: 16px;
		cursor: pointer;
	}

	.botao__opcao--historicoDireita {
		border: 0;
		background-color: purple;
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: center;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		position: absolute;
		top: 30%;
		right: 16px;
		cursor: pointer;
	}

	@keyframes aparecerSecao {
		0% {
			opacity: 0;
			transform: translateX(200px);
		}

		30% {
			opacity: 1;
			transform: translateX(0);
		}

		80% {
			opacity: 1;
			transform: translateX(0);
		}

		100% {
			opacity: 1;
			transform: translateX(0);
		}
	}

	@keyframes girarSetaBaixo {
		0% {
			transform: rotate(0);
		}

		50% {
			transform: rotate(90deg);
		}

		100% {
			transform: rotate(90deg);
		}
	}

	@keyframes girarSetaCima {
		0% {
			transform: rotate(90deg);
		}

		50% {
			transform: rotate(0deg);
		}

		100% {
			transform: rotate(0deg);
		}
	}

	@keyframes desaparecerSecao {
		0% {
			opacity: 1;
			transform: translate(0);
		}

		30% {
			opacity: 1;
			transform: translateX(0);
		}

		80% {
			opacity: 1;
			transform: translateX(200);
		}

		100% {
			opacity: 0;
			transform: translateX(200);
		}
	}


</style>